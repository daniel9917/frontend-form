<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Actualización de usuarios</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class=" container">
            <form [formGroup]=form (ngSubmit)="save($event)">
                <div class="row alling-items-center">

                    <div class="col-4">
                        <label class="form-label" for="iden">ID:</label>
                    </div>
                    <div class="col">
                        <input class="form-control" type="number" formControlName="iden" id="iden">
                    </div>
                </div>

                <br>

                <div class="row alling-items-center">

                    <div class="col-4">
                        <label class="form-label" for="name">Primer nombre:</label>
                    </div>
                    <div class="col">
                        <input class="form-control" type="text" formControlName="name" id="name" placeholder="John">
                    </div>
                    <div class="col-12" *ngIf="form.get('name')?.errors && form.get('name')?.dirty">
                        <small class="form-control" *ngIf="form.get('name')?.hasError('required')">Este campo es
                            requerido</small>
                        <small class="form-control" *ngIf="form.get('name')?.hasError('pattern')">Solo se permiten letras sin
                            espacios en este
                            campo
                        </small>
                    </div>
<!-- 

                    <div>
                        <label>Primer Nombre</label>
                        <div>
                            <input formControlName="name" type="text" id="name">
                        </div>
                        <div *ngIf="form.get('name')?.errors && form.get('name')?.dirty" class="col-12">
                            <small *ngIf="form.get('name')?.hasError('required')">Este campo es requerido</small>
                            <small *ngIf="form.get('name')?.hasError('pattern')">Solo se permiten letras sin espacios en
                                este campo
                            </small>
                        </div>
                    </div> -->
                </div>

                <br>

                <div class="row alling-items-center">
                    

                    <div class="col-4">
                        <label class="form-label" for="lastname">Primer Apellido: </label>
                    </div>
                    <div class="col">
                        <input class="form-control" type="text" formControlName="lastName" id="lastName" placeholder="Doe">
                    </div>
                    <div class="col-12" *ngIf="form.get('lastName')?.errors && form.get('lastName')?.dirty"  >
                        <small *ngIf="form.get('lastName')?.hasError('required')" class="form-control">Este campo es requerido</small>
                        <small *ngIf="form.get('lastName')?.hasError('pattern')" class="form-control">Solo se permiten letras sin espacios en
                            este
                            campo </small>
                    </div>           
<!-- 

                    <div>
                        <label>Primer Apellido</label>
                        <div>
                            <input formControlName="lastName" type="text" id="lastNname">
                        </div>
                        <div *ngIf="form.get('lastName')?.errors && form.get('lastName')?.dirty" class="col-12">
                            <small *ngIf="form.get('lastName')?.hasError('required')">Este campo es requerido</small>
                            <small *ngIf="form.get('lastName')?.hasError('pattern')">Solo se permiten letras sin
                                espacios en
                                este
                                campo </small>
                        </div>
                    </div> -->
                </div>

                <br>

                <div class="row alling-items-center">

                    <div class="col-4">
                        <label class="form-label" for="cedula">Cédula:</label>
                    </div>
        
                    <div class="col">
                        <input class="form-control" type="number" formControlName="cedula" id="cedula" placeholder="1234567890">
                    </div>
                    
                    <div *ngIf="(_cedula) && (cedulaV != form.get('cedula')?.value)" class="col-12">
                        <br>
                        <small class="form-control">Este valor de cédula ha sido registrado previamente</small>
                    </div>
        
                    <div *ngIf="form.get('cedula')?.errors && form.get('cedula')?.dirty" class="col-12">
                        <br>
                        <small *ngIf="form.get('cedula')?.hasError('required')" class="form-control">Este campo es requerido</small>
                        <small *ngIf="form.get('cedula')?.hasError('min')" class="form-control">Valor mínimo debe ser 0</small>
                        <small *ngIf="form.get('cedula')?.hasError('max')" class="form-control">Valor máximo debe ser 9999999999</small>
                    </div>
<!-- 
                    <div>
                        <label>Cedula</label>
                        <div>
                            <input formControlName="cedula" type="number" id="cedula">
                        </div>
                        <div *ngIf="(_cedula) && (cedulaV != form.get('cedula')?.value)" class="col-12">
                            <small>Este valor de cédula ha sido registrado previamente</small>
                        </div>
                        <div *ngIf="form.get('cedula')?.errors && form.get('cedula')?.dirty" class="col-12">
                            <small *ngIf="form.get('cedula')?.hasError('required')">Este campo es requerido</small>
                            <small *ngIf="form.get('cedula')?.hasError('min')">Valor mínimo debe ser 0</small>
                            <small *ngIf="form.get('cedula')?.hasError('max')">Valor máximo debe ser 9999999999</small>
                        </div>
                    </div> -->
                </div>
                <br>
                <div class="row alling-items-center">

                    <div class="col-4">
                        <label class="form-label" for="email">Correo:</label>
                    </div>
                    <div class="col">
                        <input class="form-control" type="email" formControlName="email" id="email" placeholder="example@ex.com">
                    </div>    
                    <div *ngIf="(_email) && (emailV != form.get('email')?.value)" class="col-12">
                        <small class="form-control">Este valor de email ha sido registrado previamente</small>
                    </div>        
                    <div *ngIf="form.get('email')?.errors && form.get('email')?.dirty" class="col-12">
                        <small class="form-control" *ngIf="form.get('email')?.hasError('required')">Este campo es requerido</small>
                        <small class="form-control" *ngIf="form.get('email')?.hasError('email')">Por favor ingrese un formato válido de
                            correo</small>
                    </div>           

<!-- 
                    <div>
                        <label>Correo</label>
                        <div>
                            <input formControlName="email" type="email" id="email">
                        </div>
                        <div *ngIf="(_email) && (emailV != form.get('email')?.value) " class="col-12">
                            <small>Este valor de email ha sido registrado previamente</small>
                        </div>
                        <div *ngIf="form.get('email')?.errors && form.get('email')?.dirty" class="col-12">
                            <small *ngIf="form.get('email')?.hasError('required')">Este campo es requerido</small>
                            <small *ngIf="form.get('email')?.hasError('email')">Por favor ingrese un formato válido de
                                correo</small>
                        </div>
                    </div> -->
                </div>
                <br>
                <div class="row alling-items-center">
                    <div class="col-4">
                        <label class="form-label" for="phone">Teléfono:</label>
                    </div>
                    <div class="col">
                        <input class="form-control" type="number" formControlName="phone" id="phone" placeholder="5555555">
                    </div>
                    <div *ngIf="form.get('phone')?.errors && form.get('phone')?.dirty" class="col-12">
                        <small class="form-control" *ngIf="form.get('phone')?.hasError('required')">Este campo es requerido</small>
                        <small class="form-control" *ngIf="form.get('phone')?.hasError('min')">Valor mínimo debe ser 1111111</small>
                        <small class="form-control" *ngIf="form.get('phone')?.hasError('max')">Valor máximo debe ser 9999999999</small>
                    </div>
                    <!-- <div>
                        <label>Teléfono</label>
                        <div>
                            <input formControlName="phone" type="number" id="phone">
                        </div>
                        <div *ngIf="form.get('phone')?.errors && form.get('phone')?.dirty" class="col-12">
                            <small *ngIf="form.get('phone')?.hasError('required')">Este campo es requerido</small>
                            <small *ngIf="form.get('phone')?.hasError('min')">Valor mínimo debe ser 1111111</small>
                            <small *ngIf="form.get('phone')?.hasError('max')">Valor máximo debe ser 9999999999</small>
                        </div>
                    </div> -->
                </div>
            </form>
        </div>

    </div>
    <div class="modal-footer">
        <button type="button" [disabled]="form.invalid" class="btn btn-outline-dark"
            (click)="save($event)">Save</button>
    </div>
</ng-template>

<div class="container">
    <br>
    <div class="row justify-content-center table-wrapper-scroll-y my-custom-scrollbar ">
        <table class="table table-bordered table-hover table-striped mb-0">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Apellido</th>
                    <th scope="col">Cedula</th>
                    <th scope="col">Correo</th>
                    <th scope="col">Teléfono</th>
                    <th scope="col">Editar</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let u of usuarios">
                    <th scope="row">{{u.id}}</th>
                    <td>{{u.name}}</td>
                    <td>{{u.lastName}}</td>
                    <td>{{u.cedula}}</td>
                    <td>{{u.email}}</td>
                    <td>{{u.phone}}</td>
                    <td>
                        <button type="button" class="btn btn-success" (click)="open(content,u)"><i
                                class="bi bi-brush-fill"></i></button>
                        <!-- <button type="button" class="btn btn-success" (click)="open(content)">Submit</button> -->
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>